# Your Diary Backend

## Как завести

TODO

Ограничения, которые необходимо исправить:

На сегодняшний день можно записать только до тех пор, пока время по GMT не пробьет полночь. (к примеру в GMT+3 до трех часов ночи). Отсюда же и проблема с попаданием заданий в архив (их еще можно редактировать некоторое время).
Записав ДЗ на сегодня заранее и поменяв дату на след, нельзя задание вернуть обратно на сегодня.

## Права в группах

Группы делятся на два типа:

- **Свободная**: когда у всех есть доступ к редактированию заданий <!-- (действия все еще логируются) -->
- **Модерируемая**: когда только у некоторых участников есть доступ к редактированию заданий - модераторов. Их список контролируется владельцем. В свою очередь владелец всегда обладает всеми правами модераторов. Владелец может быть единственным модератором в группе.

Обычно первый тип удобней, хотя любом случае тип всегда можно поменять на второй.

Тип группы выбирается либо при создании, либо в настройках владельцем.
При изменении типа группы на *свободную* список модераторов сохраняется.

Владелец в группе только один, только он может изменять настройки группы. В случае, если владелец решит покинуть группу, он должен будет назначить нового владельца из списка участников.

## Ссылка для приглашения

Есть единственный способ вступить в группу – через пригласительную ссылку. Она не должна быть в открытом доступе.

- Эта ссылка видна всем участникам (а также её QR код).
- *Владелец* может отключить её в настройках.
- *Модераторы* (или участники, если группа свободная) всегда могут создать новую ссылку.

## Ограничения

- Пользователь может состоять максимум в 20 группах.
- В каждой группе может быть до 100 пользователей.
- На количество модераторов нет ограничения.

## Ключ API

У каждый группы можно включить свой ключ для доступа к дневнику через API graphql.
Подробности уже в скором времени.

<!-- ## Логирвание действий

Все действия в группе записываются по времени и доступны далее для просмотра владельцу. -->

UI notes:

- filtering types and dates
- all actions must be grouped by day
- on type `MEMBER_LEAVE` underscore if he was moderator

<!-- Типы логируемых действий:

- Присоединение к группе
- Уход из группы
- Пересоздание новой пригласительной ссылки
- Создание задачи
- Редактирование *текста* задачи
- Удаление прикреплённых файлов
- Удаление задачи - дата, название урока

Записанные действия удалить нельзя. -->
